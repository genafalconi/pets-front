"use strict";(self.webpackChunkpets_front=self.webpackChunkpets_front||[]).push([[984],{2984:function(e,n,s){s.r(n),s.d(n,{default:function(){return Ee}});s(7478);var t=s(5545),r=s(390),i=s(8788),a=s(416),c=s(2559);function l(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"xl",role:"status","aria-hidden":"true"})})}function o(e){var n=e.children;return(0,c.jsx)(i.Z,{children:(0,c.jsx)(r.Suspense,{fallback:(0,c.jsx)(l,{}),children:n})})}var d=s(7592),u=s(5400),h=s(1190),m=new(s(1965).r)({cloud:{cloudName:"do2rkxpux",apiKey:"AIzaSyAW3daO0PFaGoJt-ll-Z5E-U18wHX44f0s",apiSecret:"Yb0xNHZcBgrj8713wDk46LO9d7g"}}),x=function(e){var n=m.image(e);return n.quality(80),n},v="Ppales/Cat",j="Ppales/Dog";function f(){return(0,c.jsxs)("div",{className:"animal-selection",children:[(0,c.jsx)(u.rU,{to:"/products?animal=CAT",children:(0,c.jsxs)(d.Z,{className:"bg-dark text-white animal-card",children:[(0,c.jsx)(h.pw,{cldImg:x(v),alt:"Cat"}),(0,c.jsx)(d.Z.ImgOverlay,{children:(0,c.jsx)("div",{className:"card-title-container cat",children:(0,c.jsx)(d.Z.Title,{children:"Gato"})})})]})}),(0,c.jsx)(u.rU,{to:"/products?animal=DOG",children:(0,c.jsxs)(d.Z,{className:"bg-dark text-white animal-card",children:[(0,c.jsx)(h.pw,{cldImg:x(j),alt:"Cat"}),(0,c.jsx)(d.Z.ImgOverlay,{children:(0,c.jsx)("div",{className:"card-title-container dog",children:(0,c.jsx)(d.Z.Title,{children:"Perro"})})})]})})]})}function p(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(o,{children:(0,c.jsx)(f,{})})})}var Z=s(3433),g=s(9439),N=s(1707),b=s(1750),y=s(4664);function C(e){var n,s,t,i,a=e.data,l=(0,b.I0)(),o=localStorage.getItem("user"),d=(0,r.useState)(null===a||void 0===a||null===(n=a.subproducts[0])||void 0===n?void 0:n._id),u=(0,g.Z)(d,2),m=u[0],v=u[1],j=(0,r.useState)(0),f=(0,g.Z)(j,2),p=f[0],N=f[1],C=(0,r.useState)(null),k=(0,g.Z)(C,2),S=k[0],_=k[1],w=(0,r.useState)(null===a||void 0===a||null===(s=a.subproducts[0])||void 0===s?void 0:s._id),I=(0,g.Z)(w,2),E=I[0],A=I[1],T=(0,Z.Z)(a.subproducts).sort((function(e,n){return e.size-n.size})),R=function(e){if("asc"===e.target.name){var n=null===a||void 0===a?void 0:a.subproducts.find((function(e){return e._id===m}));p<n.stock&&N(p+1)}else 0!==p&&N(p-1)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"product-card",children:[(0,c.jsx)("div",{className:"product-card_img",children:(0,c.jsx)(h.pw,{cldImg:x(null===a||void 0===a?void 0:a.image)})}),(0,c.jsx)("div",{className:"product-card_name",children:(0,c.jsx)("h3",{children:null===a||void 0===a?void 0:a.name})}),(0,c.jsx)("div",{className:"product-card_subprod",children:(0,c.jsx)("div",{className:"subprod__button",children:T.map((function(e){return(0,c.jsxs)("button",{onClick:function(){return n=e._id,v(n),void A(n);var n},className:e._id===E?"selected":"not-selected",children:[null===e||void 0===e?void 0:e.size,"kg"]},e._id)}))})}),(0,c.jsxs)("div",{className:"product-card__quantity",children:[(0,c.jsx)("button",{onClick:R,name:"desc",children:"-"}),(0,c.jsx)("p",{className:"number",children:p}),(0,c.jsx)("button",{onClick:R,name:"asc",children:"+"})]}),(0,c.jsxs)("div",{className:"subprod__price",children:[(0,c.jsxs)("p",{className:"not-discount",children:["$",(1.15*(null===a||void 0===a||null===(t=a.subproducts.find((function(e){return e._id===m})))||void 0===t?void 0:t.sell_price)).toFixed(2)]}),(0,c.jsxs)("p",{className:"discount",children:["$",null===a||void 0===a||null===(i=a.subproducts.find((function(e){return e._id===m})))||void 0===i?void 0:i.sell_price.toFixed(2)]})]}),(0,c.jsx)("div",{className:"product-card_add",children:(0,c.jsx)("button",{onClick:function(){return function(e){var n=null===e||void 0===e?void 0:e.subproducts.find((function(e){return e._id===m}));if(p>0){var s={_id:null===n||void 0===n?void 0:n._id,product:null===e||void 0===e?void 0:e._id,buy_price:null===n||void 0===n?void 0:n.buy_price,sell_price:null===n||void 0===n?void 0:n.sell_price,size:null===n||void 0===n?void 0:n.size,category:null===n||void 0===n?void 0:n.category,animal:null===n||void 0===n?void 0:n.animal,brand:null===n||void 0===n?void 0:n.brand,animal_size:null===n||void 0===n?void 0:n.animal_size,animal_age:null===n||void 0===n?void 0:n.animal_age,active:null===n||void 0===n?void 0:n.active,stock:null===n||void 0===n?void 0:n.stock,quantity:p,name:e.name};_(s),setTimeout((function(){_()}),3e3),l((0,y.Fo)(s)),o&&l((0,y.G2)(s)),N(0)}}(a)},children:"Agregar"})})]}),(0,c.jsx)(c.Fragment,{children:S?(0,c.jsx)("div",{className:"cart-item-added",children:(0,c.jsxs)("div",{className:"cart-product-card",children:[(0,c.jsx)("div",{className:"product-name",children:(0,c.jsx)("h3",{children:S.name})}),(0,c.jsxs)("div",{className:"product-details",children:[(0,c.jsxs)("div",{className:"product-size",children:[S.size,"kg"]}),(0,c.jsxs)("div",{className:"product-quantity",children:[S.quantity," un"]}),(0,c.jsx)("div",{className:"product-price",children:(0,c.jsxs)("p",{children:["$",S.sell_price]})})]})]})},S.id):""})]})}function k(){var e=new URLSearchParams((0,t.TH)().search).get("input"),n=new URLSearchParams((0,t.TH)().search).get("animal"),s=(0,b.I0)(),i=(0,b.v9)((function(e){return e.clientReducer})),l=i.products,d=i.products_filtered,u=i.current_page,h=i.total_pages,m=(0,r.useState)(!e),x=(0,g.Z)(m,2),v=x[0],j=x[1],f=(0,r.useState)(u),p=(0,g.Z)(f,2),k=p[0],S=p[1],_=(0,r.useMemo)((function(){var n=e?d:l;return Array.isArray(n)&&(null===n||void 0===n?void 0:n.map((function(e){return(0,c.jsx)(o,{children:(0,c.jsx)(C,{data:e})},e._id)})))}),[l,d,e]),w=function(n){S(n),e?I():E()},I=(0,r.useCallback)((function(){j(!0),s((0,y.mi)({input_value:e,page:k})).then((function(e){e.payload&&j(!1)}))}),[s,k,e]),E=(0,r.useCallback)((function(){j(!0),s((0,y.FF)({animal:n,page:k})).then((function(e){e.payload&&j(!1)}))}),[s,n,k]);return(0,r.useEffect)((function(){e?I():E()}),[E,I,e]),(0,c.jsx)("div",{className:"content-page",children:v?(0,c.jsx)("div",{className:"loading",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"xl",role:"status","aria-hidden":"true"})}):(0,c.jsxs)("div",{className:"products-container",children:[(0,c.jsx)("div",{className:"title",children:(0,c.jsx)("h1",{children:"Productos"})}),(0,c.jsx)("div",{className:"list-products",children:_&&0!==_.length?_:(0,c.jsx)("h2",{children:"No hay productos"})}),(0,c.jsxs)(N.Z,{children:[(0,c.jsx)(N.Z.First,{onClick:function(){return w(1)}}),(0,c.jsx)(N.Z.Prev,{onClick:function(){return w(k-1)}}),(0,Z.Z)(Array(h)).map((function(e,n){return(0,c.jsx)(N.Z.Item,{active:k===n+1,onClick:function(){return w(n+1)},children:n+1},n)})),(0,c.jsx)(N.Z.Next,{onClick:function(){return w(k+1)}}),(0,c.jsx)(N.Z.Last,{onClick:function(){return w(h)}})]})]})})}var S=s(4165),_=s(5861),w=s(4906),I=s(8464),E=s(3803),A=s(4942),T=s(1413),R=s(4357),F=s(6531),H=s(5753),z=s(5425),L="Ppales/Google",P="Ppales/Logo";function D(e){var n=e.show,s=e.onHideLogin,t=e.onHideRegister,i=e.onModalClose,l=(0,b.I0)(),o=localStorage.getItem("token"),d=localStorage.getItem("user"),u=(0,b.v9)((function(e){return e.clientReducer.cart})),m=(0,r.useState)(!1),v=(0,g.Z)(m,2),j=v[0],f=v[1],p=(0,r.useState)({email:"",password:""}),Z=(0,g.Z)(p,2),N=Z[0],C=Z[1],k=function(e){C((0,T.Z)((0,T.Z)({},N),{},(0,A.Z)({},e.target.name,e.target.value)))};return(0,r.useEffect)((function(){}),[o,d,l]),(0,c.jsxs)(z.Z,{show:n,onHide:function(){s(),i&&i()},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,c.jsx)(z.Z.Header,{closeButton:!0,children:(0,c.jsx)(z.Z.Title,{id:"contained-modal-title-vcenter",children:"Log In"})}),(0,c.jsxs)(z.Z.Body,{className:"modal-login-body",children:[(0,c.jsx)(h.pw,{cldImg:x(P),className:"modal-body_logo",alt:"logo-pets"}),(0,c.jsxs)("form",{className:"modal-body_form",children:[(0,c.jsx)("input",{type:"text",placeholder:"email",name:"email",defaultValue:"",onChange:k}),(0,c.jsx)("input",{type:"password",placeholder:"password",defaultValue:"",name:"password",onChange:k})]}),j?(0,c.jsx)(H.Z,{className:"modal-body_login",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}):(0,c.jsx)(H.Z,{className:"modal-body_login",onClick:function(e){e.preventDefault(),f(!0),l((0,y.Et)(N)).then((function(e){201===e.payload.status&&(0!==Object.keys(u).length?l((0,y.iM)(u)).then((function(e){s()})):s()),f(!1)})),C({email:"",password:""})},children:"Iniciar Ses\xedon"}),(0,c.jsx)(h.pw,{cldImg:x(L),className:"modal-body_google",alt:"signInGoogle",onClick:function(){(0,R.rh)(F.lX,F.I_).then((function(e){var n=e.user,t={email:n.email,fullName:n.displayName,id:n.uid,phoneNumber:n.phoneNumber};f(!0),l((0,y.z3)(t)).then((function(e){201===e.payload.status&&(0!==Object.keys(u).length?l((0,y.iM)(u)).then((function(e){localStorage.setItem("token",n.accessToken),s()})):(localStorage.setItem("token",n.accessToken),s()))}))})).catch((function(e){return e.message})),f(!1)}})]}),(0,c.jsxs)(z.Z.Footer,{className:"modal-login-footer",children:[(0,c.jsx)("p",{children:"Todav\xeda no tenes cuenta?"}),(0,c.jsx)(H.Z,{className:"outline-primary",onClick:function(){s(),t()},children:"Registrate"})]})]})}var O=s(648),B=s(749);function M(e){var n=e.onHideAddress,s=(0,b.I0)(),r=(0,t.s0)();return(0,c.jsx)("div",{className:"user-nav_sesion_options",children:(0,c.jsxs)(O.Z,{className:"d-inline_mx-2",children:[(0,c.jsx)(O.Z.Toggle,{id:"dropdown-autoclose-true",className:"dropdown-custom",children:(0,c.jsx)(B.Xws,{className:"user-nav_sesion_icon",size:25})}),(0,c.jsxs)(O.Z.Menu,{className:"dropdown-custom-menu",children:[(0,c.jsx)(O.Z.Item,{href:"/account",children:"Cuenta"}),(0,c.jsx)(O.Z.Item,{onClick:function(){n()},children:"Direcciones"}),(0,c.jsx)(O.Z.Item,{onClick:function(e){e.preventDefault(),s((0,y.Nv)()),r("/"),window.location.reload()},children:"Cerrar sesion"})]})]})})}var q=s(4381),G=s.n(q),U="Ppales/Google";function W(e){var n=e.show,s=e.onHideLogin,t=e.onHideRegister,i=e.onModalClose,l=(0,b.I0)(),o=(0,b.v9)((function(e){return e.clientReducer.cart})),d=(0,r.useState)(!1),u=(0,g.Z)(d,2),m=u[0],v=u[1],j=(0,r.useState)({email:"",fullName:"",phone:"",password:""}),f=(0,g.Z)(j,2),p=f[0],Z=f[1],N=localStorage.getItem("token"),C=localStorage.getItem("user"),k=function(e){Z((0,T.Z)((0,T.Z)({},p),{},(0,A.Z)({},e.target.name,e.target.value)))},S=function(e){e.preventDefault(),v(!0),l((0,y.dZ)(p)).then((function(e){201===e.payload.status&&(0!==Object.keys(o).length&&l((0,y.iM)(o)).then((function(e){t()})),G().fire({title:"Usuario creado correctamente",text:"Mail: ".concat(e.payload.data.email),icon:"success"})),v(!1),_()})).catch((function(e){var n=e.message;return v(!1),n}))},_=function(){t(),i&&i()};return(0,r.useEffect)((function(){}),[N,C,m,o]),(0,c.jsxs)(z.Z,{show:n,onHide:_,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,c.jsx)(z.Z.Header,{closeButton:!0,children:(0,c.jsx)(z.Z.Title,{id:"contained-modal-title-vcenter",children:"Registrate"})}),(0,c.jsxs)(z.Z.Body,{className:"modal-register-body",children:[(0,c.jsx)(E.Z,{className:"register-form",onSubmit:S,children:(0,c.jsxs)(E.Z.Group,{className:"register-form_group",children:[(0,c.jsx)(E.Z.Label,{children:"Email"}),(0,c.jsx)(E.Z.Control,{type:"email",name:"email",placeholder:"Email",defaultValue:"",onChange:k}),(0,c.jsx)(E.Z.Label,{children:"Nombre y Apellido"}),(0,c.jsx)(E.Z.Control,{type:"text",name:"fullName",placeholder:"Nombre y Apellido",defaultValue:"",onChange:k}),(0,c.jsx)(E.Z.Label,{children:"Telefono"}),(0,c.jsx)(E.Z.Control,{type:"text",name:"phone",placeholder:"Telefono",defaultValue:"",onChange:k}),(0,c.jsx)(E.Z.Label,{children:"Contrase\xf1a"}),(0,c.jsx)(E.Z.Control,{type:"password",name:"password",defaultValue:"",onChange:k})]})}),m?(0,c.jsx)(H.Z,{className:"modal-body_register",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}):(0,c.jsx)(H.Z,{className:"modal-body_register",onClick:S,children:"Registrarse"}),(0,c.jsx)(h.pw,{cldImg:x(U),className:"modal-body_google",alt:"signInGoogle",onClick:function(){v(!0),(0,R.rh)(F.lX,F.I_).then((function(e){var n=e.user,s={email:n.email,fullName:n.displayName,id:n.uid,phoneNumber:n.phoneNumber};localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("token",n.accessToken),l((0,y.z3)(s)),_()})).catch((function(e){return e.message}))}})]}),(0,c.jsxs)(z.Z.Footer,{className:"modal-register-footer",children:[(0,c.jsx)("p",{children:"Ya tenes cuenta?"}),(0,c.jsx)(H.Z,{className:"btn outline-primary",onClick:function(){t(),s()},children:"Inicia Ses\xedon"})]})]})}function $(e){var n=e.quantity,s=e.idSubprod,t=e.stock,i=(0,b.I0)(),a=localStorage.getItem("user"),l=(0,r.useState)(n),o=(0,g.Z)(l,2),d=o[0],u=o[1],h=function(e){if("asc"===e.target.name){if(d<t){var n=d+1;u(n),m(n)}}else if(0!==d){var s=d-1;u(s),m(s)}},m=(0,r.useCallback)((function(e){var n={idSubprod:s,newQuantity:e};i((0,y.yf)(n)),a&&i((0,y.Ae)(n))}),[i,s,a]);return(0,r.useEffect)((function(){}),[d]),(0,c.jsxs)("div",{className:"product-quantity",children:[(0,c.jsx)("button",{className:"button-quantity",onClick:h,name:"desc",children:"-"}),(0,c.jsx)("p",{children:d}),(0,c.jsx)("button",{className:"button-quantity",onClick:h,name:"asc",children:"+"})]})}function V(){var e,n,s,i,a=(0,t.s0)(),l=(0,b.I0)(),o=(0,r.useState)(!1),d=(0,g.Z)(o,2),u=d[0],h=d[1],m=(0,r.useState)(0),x=(0,g.Z)(m,2),v=x[0],j=x[1],f=(0,b.v9)((function(e){return e.clientReducer})),p=f.cart,Z=f.reorder_cart,N=JSON.parse(localStorage.getItem("cart")),C=JSON.parse(localStorage.getItem("reorder_cart"));C&&0!==Object.keys(C).length&&(N=C,p=Z);var k=localStorage.getItem("user"),w=function(){var e=(0,_.Z)((0,S.Z)().mark((function e(n){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N&&(l((0,y.$x)(n)).then((function(e){var n,s;0===(null===(n=e.payload)||void 0===n||null===(s=n.subproducts)||void 0===s?void 0:s.length)&&h(!0)})),k&&l((0,y.OZ)(n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e,n;if(N&&0===Object.keys(N).length)h(!0);else if(N)if(N&&0===(null===(e=N)||void 0===e||null===(n=e.subproducts)||void 0===n?void 0:n.length))h(!0);else{var s;h(!1),j(null===(s=N)||void 0===s?void 0:s.total_products)}else h(!0)}),[u,N,p]),(0,c.jsxs)(O.Z,{className:"dropdown-cart".concat("/checkout"===window.location.pathname?" d-none":""),children:[(0,c.jsxs)(O.Z.Toggle,{id:"dropdown-autoclose-true",className:"dropdown-custom",children:[(0,c.jsx)("div",{className:"total-cart-icon",children:(0,c.jsx)("span",{children:v})}),(0,c.jsx)(B.FeP,{className:"user-nav_cart_icon",size:25})]}),(0,c.jsx)(O.Z.Menu,{className:"dropdown-cart-items",onClick:function(e){return e.stopPropagation()},children:u?(0,c.jsx)(O.Z.Item,{className:"cart-item_empty-cart",onClick:function(e){return e.stopPropagation()},children:"No hay productos"}):(0,c.jsxs)(c.Fragment,{children:[null===(e=N)||void 0===e||null===(n=e.subproducts)||void 0===n?void 0:n.map((function(e){var n,s,t,r,i,a,l,o;return(0,c.jsx)(O.Z.Item,{className:"cart-item",onClick:function(e){return e.stopPropagation()},children:(0,c.jsxs)("div",{className:"cart-product-card",children:[(0,c.jsx)("div",{className:"product-name",children:(0,c.jsx)("h3",{children:k?null===(s=e.subproduct)||void 0===s||null===(t=s.product)||void 0===t?void 0:t.name:null===e||void 0===e||null===(r=e.subproduct)||void 0===r?void 0:r.name})}),(0,c.jsxs)("div",{className:"product-details",children:[(0,c.jsxs)("div",{className:"product-size",children:[null===(i=e.subproduct)||void 0===i?void 0:i.size,"kg"]}),(0,c.jsx)($,{quantity:e.quantity,idSubprod:null===(a=e.subproduct)||void 0===a?void 0:a._id,stock:null===(l=e.subproduct)||void 0===l?void 0:l.stock}),(0,c.jsxs)("div",{className:"product-price",children:["$",null===(o=e.subproduct)||void 0===o?void 0:o.sell_price]}),(0,c.jsx)("div",{className:"product-remove",children:(0,c.jsx)(I.$vK,{onClick:function(){return w(e.subproduct)}})})]})]})},null===(n=e.subproduct)||void 0===n?void 0:n._id)})),(0,c.jsx)(O.Z.Divider,{}),(0,c.jsxs)(O.Z.Item,{className:"cart-final-item",children:[(0,c.jsxs)("div",{className:"cart-total-price",onClick:function(e){return e.stopPropagation()},children:[(0,c.jsx)("p",{children:"Total:"}),(0,c.jsxs)("p",{children:["$",null!==(s=N)&&void 0!==s&&s.total_price?null===(i=N)||void 0===i?void 0:i.total_price:0]})]}),u?"":(0,c.jsx)("div",{className:"primary-button",children:(0,c.jsx)("button",{onClick:function(){a("/checkout/order")},children:"Pagar"})})]})]})})]})}var J=s(9802),K=["places"];function X(e){var n=e.show,s=e.handleHide,t=(0,r.useMemo)((function(){return{lat:-34.439251576394,lng:-58.59573492482023}}),[]),i=(0,J.Db)({googleMapsApiKey:"AIzaSyAW3daO0PFaGoJt-ll-Z5E-U18wHX44f0s",libraries:K}),l=i.isLoaded,o=i.loadError;return(0,c.jsxs)(z.Z,{show:n,onHide:s,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,c.jsx)(z.Z.Header,{closeButton:!0,children:(0,c.jsx)(z.Z.Title,{id:"contained-modal-title-vcenter",children:"Nuestra Cobertura"})}),(0,c.jsx)(z.Z.Body,{className:"modal-maps-body",children:o?(0,c.jsx)("div",{children:"Error loading maps"}):l?(0,c.jsx)(J.b6,{mapContainerClassName:"maps-google",mapContainerStyle:{height:"300px"},center:t,zoom:11,options:{fullscreenControl:!1,zoomControl:!1,streetViewControl:!1,gestureHandling:"none",mapTypeControl:!1},children:(0,c.jsx)(J.Cd,{center:t,radius:8e3})}):(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"})})]})}function Y(e){var n=e.id,s=e.modal,t=e.street,i=e.number,a=e.floor,l=e.flat,o=e.city,d=e.province,u=e.extra,h=e.setSettedAddress,m=e.selectedAddress,x=e.setSelectedAddress;return(0,r.useEffect)((function(){}),[m]),(0,c.jsx)("div",{className:s?"container-address-modal":"container-address ".concat(m===n?"selected":""),onClick:function(){var e;m===(e=n)?(x(null),h(null)):(x(e),h(e))},children:(0,c.jsxs)("div",{className:"address-list-container",children:[(0,c.jsxs)("div",{className:"address-details",children:[(0,c.jsx)("h5",{children:t}),(0,c.jsx)("h5",{children:i})]}),(0,c.jsxs)("div",{className:"address-sec-details",children:[(0,c.jsxs)("div",{className:"col1",children:[(0,c.jsxs)("p",{children:["Piso: ",a||"-"]}),(0,c.jsxs)("p",{children:["Departamento: ",l||"-"]})]}),(0,c.jsxs)("div",{className:"col2",children:[(0,c.jsxs)("p",{children:["Ciudad: ",o]}),(0,c.jsxs)("p",{children:["Provincia: ",d]})]})]}),(0,c.jsx)("div",{className:"extra",children:(0,c.jsxs)("p",{children:["Comentarios: ",u]})})]})})}var Q=s(9914),ee=s(3948);function ne(e){var n=e.show,s=e.onHideAddress,t=e.updateAddress,i=e.fromCheckout,l=(0,b.I0)(),d=(0,b.v9)((function(e){return e.clientReducer.addresses})),u=(0,r.useState)(!1),h=(0,g.Z)(u,2),m=h[0],x=h[1],v=(0,r.useState)(!1),j=(0,g.Z)(v,2),f=j[0],p=j[1],Z=(0,r.useState)(!0),N=(0,g.Z)(Z,2),C=N[0],k=N[1],w=(0,r.useState)(!1),I=(0,g.Z)(w,2),R=I[0],F=I[1],L=(0,r.useState)({street:"",number:0,floor:"",flat:"",city:"",province:"",extra:""}),P=(0,g.Z)(L,2),D=P[0],O=P[1],B=function(e){O((0,T.Z)((0,T.Z)({},D),{},(0,A.Z)({},e.target.name,e.target.value)))},M=function(){var e=(0,_.Z)((0,S.Z)().mark((function e(s){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n||s)&&l((0,y.oY)()).then((function(e){e.payload&&k(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){M()}),[l,n,t]),(0,c.jsxs)(z.Z,{show:n,onHide:s,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"modal-address",children:[(0,c.jsx)(z.Z.Header,{closeButton:!0,children:(0,c.jsx)(z.Z.Title,{id:"contained-modal-title-vcenter",children:"Direcciones"})}),(0,c.jsxs)(z.Z.Body,{className:"modal-address-body",children:[C?"":(0,c.jsx)("div",{className:"address-table-scroll",children:(0,c.jsx)("div",{className:"address-table",children:Array.isArray(d)&&d.map((function(e){return(0,c.jsxs)(o,{className:"address-item",children:[(0,c.jsx)(Y,{id:e._id,modal:!0,street:e.street,number:e.number,floor:e.floor,flat:e.flat,city:e.city,province:e.province,extra:e.extra,setSettedAddress:null,selectedAddress:null,setSelectedAddress:null},e._id),(0,c.jsx)("hr",{})]},e._id)}))})}),(0,c.jsxs)(E.Z,{className:"modal-body_form",children:[(0,c.jsxs)(Q.Z,{children:[(0,c.jsx)(ee.Z,{children:(0,c.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formBasicStreet",children:[(0,c.jsx)(E.Z.Label,{children:"Calle:"}),(0,c.jsx)(E.Z.Control,{name:"street",type:"text",onChange:B})]})}),(0,c.jsx)(ee.Z,{children:(0,c.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formBasicNro",children:[(0,c.jsx)(E.Z.Label,{children:"Numero"}),(0,c.jsx)(E.Z.Control,{name:"number",type:"text",onChange:B})]})})]}),(0,c.jsxs)(Q.Z,{children:[(0,c.jsx)(ee.Z,{children:(0,c.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formBasicFloor",children:[(0,c.jsx)(E.Z.Label,{children:"Piso"}),(0,c.jsx)(E.Z.Control,{name:"floor",type:"text",placeholder:"Nro",onChange:B})]})}),(0,c.jsx)(ee.Z,{children:(0,c.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formBasicFlat",children:[(0,c.jsx)(E.Z.Label,{children:"Departamento"}),(0,c.jsx)(E.Z.Control,{name:"flat",type:"text",placeholder:"Nro",onChange:B})]})})]}),(0,c.jsxs)(Q.Z,{children:[(0,c.jsx)(ee.Z,{children:(0,c.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formBasicCity",children:[(0,c.jsx)(E.Z.Label,{children:"Ciudad"}),(0,c.jsx)(E.Z.Control,{name:"city",type:"text",onChange:B})]})}),(0,c.jsx)(ee.Z,{children:(0,c.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formBasicProvince",children:[(0,c.jsx)(E.Z.Label,{children:"Provincia"}),(0,c.jsx)(E.Z.Control,{name:"province",type:"text",onChange:B})]})}),(0,c.jsx)(ee.Z,{})]}),(0,c.jsx)(Q.Z,{children:(0,c.jsx)(ee.Z,{children:(0,c.jsxs)(E.Z.Group,{className:"mb-3",controlId:"formBasicExtra",children:[(0,c.jsx)(E.Z.Label,{children:"Comentarios"}),(0,c.jsx)(E.Z.Control,{name:"extra",type:"text",onChange:B})]})})}),R?(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)(H.Z,{className:"modal-body_address",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})})}):(0,c.jsx)("div",{className:"d-flex justify-content-center",children:(0,c.jsx)(H.Z,{className:"w-25",onClick:f?null:function(){(function(){if(0!==D.street.length)return!0})()&&(F(!0),p(!0),l((0,y.gv)(D)).then((function(e){0!==Object.keys(e.payload).length&&(F(!1),t(),i&&s(),p(!1))})))},children:"Crear"})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(H.Z,{variant:"link",onClick:function(){x(!m)},children:"Mira nuestra zona de cobertura"}),m?(0,c.jsx)(o,{children:(0,c.jsx)(X,{show:m,handleHide:function(){return x(!m)}})}):""]})]})]})}var se=s(3777),te="Ppales/Logo";function re(){var e=(0,r.useState)(!1),n=(0,g.Z)(e,2),s=n[0],i=n[1],a=(0,r.useState)(!1),l=(0,g.Z)(a,2),d=l[0],m=l[1],v=(0,r.useState)(!1),j=(0,g.Z)(v,2),f=j[0],p=j[1],Z=(0,r.useState)(!1),N=(0,g.Z)(Z,2),C=N[0],k=N[1],A=(0,r.useState)(!1),T=(0,g.Z)(A,2),R=T[0],H=T[1],z=(0,r.useRef)(null),L=localStorage.getItem("token"),P=localStorage.getItem("user"),B=(0,b.v9)((function(e){return e.clientReducer})).user,q=(0,b.I0)(),G=(0,t.s0)(),U=(0,r.useCallback)(function(){var e=(0,_.Z)((0,S.Z)().mark((function e(n){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q((0,y.mi)({input_value:n,page:null})).then((function(e){e.payload&&G("/products?input=".concat(n))}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[q,G]),$=function(e){var n;"Enter"===e.key&&(e.preventDefault(),U(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value));" "===e.key&&e.stopPropagation()};return(0,r.useEffect)((function(){L&&P&&m(!0);var e=function(){m(!1),q((0,y.Nv)())};se.Z.on("expired-sesion",e);var n=F.lX.onIdTokenChanged(function(){var e=(0,_.Z)((0,S.Z)().mark((function e(n){var s;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,n.getIdToken();case 3:s=e.sent,localStorage.setItem("token",s),e.next=8;break;case 7:localStorage.removeItem("token");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return L||k(!1),function(){se.Z.off("expired-sesion",e),n()}}),[L,P,s,f,B,q]),console.log(window.innerWidth),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("nav",{className:"nav",children:[(0,c.jsxs)("div",{className:"logo-nav",children:[(0,c.jsx)(u.rU,{to:"/",children:(0,c.jsx)(h.pw,{cldImg:x(te),alt:"Logo"})}),(0,c.jsx)("div",{className:"search-bar",children:window.innerWidth>768?(0,c.jsxs)("div",{className:"div-search",children:[(0,c.jsx)(E.Z.Control,{className:"input-search",type:"text",placeholder:"Buscar...",ref:z,onKeyDown:$}),(0,c.jsx)(I.vU7,{className:"action-search-icon",size:25,onClick:function(){return U(z.current.value)}})]}):(0,c.jsxs)(O.Z,{className:"d-inline_mx-2",children:[(0,c.jsx)(O.Z.Toggle,{id:"dropdown-autoclose-true",className:"dropdown-custom-search",children:(0,c.jsx)(I.vU7,{className:"icon-search",size:25})}),(0,c.jsx)(O.Z.Menu,{className:"dropdown-custom-menu",children:(0,c.jsxs)(O.Z.Item,{className:"dropdown-search-item",onClick:function(e){return e.stopPropagation()},children:[(0,c.jsx)(E.Z.Control,{className:"input-search",type:"text",placeholder:"Buscar...",ref:z,onKeyDown:$}),(0,c.jsx)(I.vU7,{className:"action-search-icon",size:25,onClick:function(){return U(z.current.value)}})]})})]})})]}),(0,c.jsxs)("div",{className:"user-nav",children:[d?(0,c.jsx)("div",{className:"user-nav_sesion",children:(0,c.jsx)(M,{onHideAddress:function(){return k(!C)}})}):(0,c.jsx)("div",{className:"link-modal",children:(0,c.jsx)(w._fJ,{className:"icon-nav",size:25,onClick:function(){i(!s)}})}),(0,c.jsx)(o,{children:(0,c.jsx)(V,{onHideLogin:function(){return i(!s)}})})]})]}),(0,c.jsx)(o,{children:(0,c.jsx)(D,{show:s,onHideLogin:function(){return i(!s)},onHideRegister:function(){return p(!f)}})}),(0,c.jsx)(o,{children:(0,c.jsx)(W,{show:f,onHideLogin:function(){return i(!s)},onHideRegister:function(){return p(!f)}})}),(0,c.jsx)(o,{children:(0,c.jsx)(ne,{show:C,onHideAddress:function(){return k(!C)},updateAddress:function(){return H(!R)},fromCheckout:!1})})]})}function ie(e){var n=e.id,s=e.product_name,t=e.size,r=e.sell_price,i=e.quantity;return(0,c.jsxs)("div",{className:"container-checkout",children:[(0,c.jsxs)("div",{className:"item-details",children:[(0,c.jsx)("div",{className:"item-name",children:(0,c.jsx)("h5",{children:s})}),(0,c.jsxs)("div",{className:"item-sec-details",children:[(0,c.jsxs)("p",{children:["Tama\xf1o: ",t,"kg"]}),(0,c.jsxs)("div",{className:"price",children:["$",r.toFixed(2)]}),(0,c.jsxs)("p",{children:["Cantidad: ",i]})]})]}),(0,c.jsx)("div",{className:"item-total",children:(0,c.jsxs)("p",{children:["$",(r*i).toFixed(2)]})})]},n)}function ae(){var e=(0,b.I0)(),n=(0,t.s0)(),s=(0,r.useState)(6e5),i=(0,g.Z)(s,2),a=i[0],l=i[1],o=function(e){var n=Math.floor(e/6e4),s=(e%6e4/1e3).toFixed(0);return"".concat(n,":").concat(s<10?"0":"").concat(s)}(a);return(0,r.useEffect)((function(){var n=setInterval((function(){l((function(s){return s<=1e3&&(clearInterval(n),e((0,y.T3)()),G().fire({title:"Se termino el tiempo!",text:"Volveras a la pantalla inicial",icon:"info"}).then((function(){window.location="/"}))),s-1e3}))}),1e3);return function(){return clearInterval(n)}}),[e,n,l]),(0,c.jsxs)("div",{className:"timer",children:["Tiempo restante: ",o]})}function ce(e){var n=new Date(e),s=n.getUTCDate(),t=n.getUTCMonth()+1;return"".concat(s<10?"0":"").concat(s,"/").concat(t<10?"0":"").concat(t)}function le(e){var n=e.offers,s=e.setSelectedOfferData,t=(0,r.useState)(null),i=(0,g.Z)(t,2),a=i[0],l=i[1];return(0,r.useEffect)((function(){s(a)}),[a,s]),(0,c.jsx)("div",{className:"offers-table",children:null===n||void 0===n?void 0:n.map((function(e){return(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsx)("tr",{children:(0,c.jsx)("th",{children:"".concat(e.weekday.toUpperCase()," ").concat(ce(e.date))})})}),(0,c.jsx)("tbody",{children:(0,c.jsx)("tr",{onClick:function(){return function(e){l((function(n){return n===e?null:e}))}(e)},className:a===e?"selected-offer":"",children:(0,c.jsxs)("td",{children:[(0,c.jsx)("p",{children:e.hours}),(0,c.jsx)("p",{children:"GRATIS"})]})},e.id)})]},e._id)}))})}var oe="Payments/Efectivo",de="Payments/Transferencia",ue="Payments/MercadoPago";function he(){var e=(0,b.I0)(),n=(0,t.s0)(),s=(0,b.v9)((function(e){return e.clientReducer})),i=s.offers,l=s.cart,d=s.address,u=s.locks,m=(0,r.useMemo)((function(){return localStorage.getItem("user")}),[]),v=(0,r.useState)(!0),j=(0,g.Z)(v,2),f=j[0],p=j[1],Z=(0,r.useState)(null),N=(0,g.Z)(Z,2),C=N[0],k=N[1],S=(0,r.useState)(null),_=(0,g.Z)(S,2),w=_[0],I=_[1],E=(0,r.useState)(!1),A=(0,g.Z)(E,2),T=A[0],R=A[1],F=(0,r.useState)(!1),H=(0,g.Z)(F,2),z=H[0],L=H[1],P=(0,r.useCallback)((function(e){var n=e.target.name;k((function(e){return e===n?null:n}))}),[]),D=(0,r.useCallback)((function(){se.Z.emit("go-back-button",!0)}),[]),O=(0,r.useCallback)((function(){var s={cart:l,user:m,offer:w,payment_type:C,address:d,locks:u};L(!0),e((0,y.qm)(s)).then((function(e){e.payload._id&&(L(!1),G().fire({title:"Pedido realizado con exito!",text:"Numero de orden: ".concat(e.payload._id),icon:"success",timer:2500,timerProgressBar:!0,showConfirmButton:!1}),n("/orders"))}))}),[l,e,m,w,C,d,u,n]);(0,r.useEffect)((function(){R(!(!C||!w))}),[w,C]);var B=(0,r.useCallback)((function(){e((0,y.e4)()).then((function(e){p(!1)}))}),[e]);return(0,r.useEffect)((function(){B()}),[B]),(0,c.jsx)(c.Fragment,{children:f?(0,c.jsx)("div",{className:"loading",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"lg",role:"status","aria-hidden":"true"})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"title",children:(0,c.jsx)("h1",{children:"Coordinar"})}),(0,c.jsxs)("div",{className:"coordinate-container",children:[(0,c.jsxs)("div",{className:"date",children:[(0,c.jsx)("div",{className:"subtitle",children:(0,c.jsx)("h2",{children:"Fecha de entrega"})}),(0,c.jsx)(o,{children:(0,c.jsx)(le,{offers:i,setSelectedOfferData:I})}),(0,c.jsx)("div",{className:"mt-3",children:w?"":(0,c.jsx)("p",{children:"Selecciona una oferta"})})]}),(0,c.jsxs)("div",{className:"payment",children:[(0,c.jsx)("div",{className:"subtitle",children:(0,c.jsx)("h2",{children:"Tipo de pago"})}),(0,c.jsxs)("div",{className:"payment-type d-flex",children:[(0,c.jsxs)("div",{className:"d-flex flex-column",children:[(0,c.jsx)(h.pw,{cldImg:x(oe),name:"CASH",className:"CASH"===C?"selected-payment":"",onClick:P}),(0,c.jsx)("span",{className:".fs-6",children:"Efectivo"})]}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[(0,c.jsx)(h.pw,{cldImg:x(ue),name:"MP",className:"MP"===C?"selected-payment":"",onClick:P}),(0,c.jsx)("span",{className:".fs-6",children:"Tarjetas"})]}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[(0,c.jsx)(h.pw,{cldImg:x(de),name:"TRANSFERENCIA",className:"TRANSFERENCIA"===C?"selected-payment":"",onClick:P}),(0,c.jsx)("span",{className:".fs-6",children:"Transferencia"})]})]}),(0,c.jsx)("div",{className:"mt-3",children:C?"":(0,c.jsx)("p",{children:"Selecciona un metodo de pago"})})]})]}),(0,c.jsxs)("div",{className:"coordinate-buttons",children:[(0,c.jsx)("div",{className:"secondary-button",children:(0,c.jsx)("button",{onClick:D,children:"Volver"})}),z?(0,c.jsx)("div",{className:"primary-button",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}):(0,c.jsx)("div",{className:T?"primary-button":"disabled-button",children:(0,c.jsx)("button",{onClick:T?O:void 0,disabled:!T,children:"Confirmar"})})]})]})})}var me=s(7139);function xe(){var e,n,s,i,l,d=(0,t.UO)().order_type,u=(0,b.I0)(),h=(0,b.v9)((function(e){return e.clientReducer})),m=h.cart,x=h.user,v=h.addresses,j=h.reorder_cart;l=d===me.Z5.REORDER?JSON.parse(localStorage.getItem("reorder_cart")):JSON.parse(localStorage.getItem("cart"));var f=localStorage.getItem("user"),p=(0,r.useState)(!0),Z=(0,g.Z)(p,2),N=Z[0],C=Z[1],k=(0,r.useState)(!1),w=(0,g.Z)(k,2),I=w[0],E=w[1],A=(0,r.useState)(!1),T=(0,g.Z)(A,2),R=T[0],F=T[1],H=(0,r.useState)(!1),z=(0,g.Z)(H,2),L=z[0],P=z[1],D=(0,r.useState)(!0),O=(0,g.Z)(D,2),B=O[0],M=O[1],q=(0,r.useState)(!0),G=(0,g.Z)(q,2),U=G[0],W=G[1],$=(0,r.useState)(null),V=(0,g.Z)($,2),J=V[0],K=V[1],X=(0,r.useState)(!1),Q=(0,g.Z)(X,2),ee=Q[0],te=Q[1],re=(0,r.useState)({user:"",subproducts:[]}),ce=(0,g.Z)(re,2),le=ce[0],oe=ce[1],de=(0,r.useCallback)((function(){F(!R)}),[R]),ue=(0,r.useCallback)((function(){P(!L),M(!B)}),[L,B]),xe=(0,r.useCallback)((0,_.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),u((0,y.oY)()).then((function(e){if(e.payload&&Array.isArray(v)){var n=v.find((function(e){return e._id===U}));n?(u((0,y.Bg)(n)),E(!0)):E(!1)}C(!1)}));case 2:case"end":return e.stop()}}),e)}))),[u,v,U]),ve=(0,r.useCallback)((function(){var e,n,s=[];null===(e=l)||void 0===e||null===(n=e.subproducts)||void 0===n||n.forEach((function(e){return s.push({subprod:e.subproduct._id,quantity:e.quantity})})),!le.user&&s.length>0&&oe({user:f,subproducts:s})}),[l,le.user,f]),je=(0,r.useCallback)((function(e){e&&(P(!1),M(!0))}),[]);return(0,r.useEffect)((function(){var e;Array.isArray(v)&&(e=Array.from(v).find((function(e){return e._id===U}))),e?(u((0,y.Bg)(e)),E(!0)):E(!1)}),[U,u,v]),(0,r.useEffect)((function(){ve()}),[ve]),(0,r.useEffect)((function(){le.subproducts.length>0&&u((0,y.i8)(le))}),[le,m,x,u,d,j]),(0,r.useEffect)((function(){j&&l&&C(!1)}),[j,l]),(0,r.useEffect)((function(){xe()}),[]),(0,r.useEffect)((function(){return se.Z.on("go-back-button",je),function(){se.Z.off("go-back-button",je)}}),[je]),(0,c.jsxs)("div",{className:"content-page",children:[N?(0,c.jsx)("div",{className:"loading",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"lg",role:"status","aria-hidden":"true"})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ae,{}),B?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"title",children:(0,c.jsx)("h1",{children:"Resumen"})}),(0,c.jsxs)("div",{className:"checkout-container",children:[(0,c.jsxs)("div",{className:"cart-items",children:[(0,c.jsx)("div",{className:"subtitle",children:(0,c.jsx)("h2",{children:"Productos"})}),null===(e=l)||void 0===e||null===(n=e.subproducts)||void 0===n?void 0:n.map((function(e){return(0,c.jsx)(o,{children:(0,c.jsx)(ie,{id:e.subproduct._id,product_name:e.subproduct.product.name,sell_price:e.subproduct.sell_price,size:e.subproduct.size,quantity:e.quantity})},e.subproduct._id)})),(0,c.jsxs)("div",{className:"cart-total",children:[(0,c.jsx)("p",{children:"Total:"}),(0,c.jsxs)("p",{children:["$",null===(s=l)||void 0===s||null===(i=s.total_price)||void 0===i?void 0:i.toFixed(2)]})]})]}),(0,c.jsxs)("div",{className:"address",children:[(0,c.jsx)("div",{className:"subtitle",children:(0,c.jsx)("h2",{children:"Direccion"})}),(0,c.jsxs)("div",{children:[(null===v||void 0===v?void 0:v.length)>0?null===v||void 0===v?void 0:v.map((function(e){return(0,c.jsx)(o,{children:(0,c.jsx)(Y,{id:e._id,modal:!1,street:e.street,number:e.number,floor:e.floor,flat:e.flat,city:e.city,province:e.province,extra:e.extra,setSettedAddress:W,selectedAddress:J,setSelectedAddress:K})},e._id)})):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"error-info",children:"No hay direcciones cargadas"}),(0,c.jsx)("div",{className:"secondary-button",children:(0,c.jsx)("button",{onClick:de,children:"Cargar"})})]}),(0,c.jsx)("div",{children:J?"":(0,c.jsx)("p",{children:"Selecciona una direccion"})}),(0,c.jsx)("div",{className:"third-button",children:(0,c.jsx)("button",{onClick:de,children:"Cargar otra"})})]})]})]}),(0,c.jsx)("div",{className:I?"primary-button checkout":"disabled-button checkout",children:(0,c.jsx)("button",{disabled:!I,onClick:ue,children:"Continuar"})})]}):(0,c.jsx)(o,{children:(0,c.jsx)(he,{})})]}),(0,c.jsx)(o,{children:(0,c.jsx)(ne,{show:R,onHideAddress:function(){return F(!R)},updateAddress:function(){return te(!ee)},fromCheckout:!0})})]})}function ve(){var e,n,s,t,i,l,o,d,u,h,m,x,v,j,f=(0,b.I0)(),p=(0,b.v9)((function(e){return e.clientReducer.order})),Z=localStorage.getItem("order"),N=localStorage.getItem("user"),C=(0,r.useState)(!0),k=(0,g.Z)(C,2),w=k[0],I=k[1];return(0,r.useEffect)((function(){var e=function(){var e=(0,_.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z||!N){e.next=3;break}return e.next=3,f((0,y.rR)(Z)).then((function(e){I(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[Z,f,N]),(0,c.jsx)("div",{className:"content-page",children:w?(0,c.jsx)("div",{className:"loading",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"lg",role:"status","aria-hidden":"true"})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"title",children:(0,c.jsx)("h1",{children:"Orden"})}),(0,c.jsxs)("div",{className:"order-container",children:[(0,c.jsxs)("div",{className:"order-info",children:[(0,c.jsx)("div",{className:"subtitle",children:(0,c.jsx)("h2",{children:"Productos"})}),(0,c.jsxs)("div",{className:"product-order",children:[null===(e=p.cart)||void 0===e||null===(n=e.subproducts)||void 0===n?void 0:n.map((function(e){return(0,c.jsxs)("div",{className:"product-order_item",children:[(0,c.jsx)("div",{className:"product-name",children:(0,c.jsxs)("p",{children:[e.subproduct.product.name," ",e.subproduct.size,"kg"]})}),(0,c.jsxs)("div",{className:"product-sec-details",children:[(0,c.jsx)("div",{className:"prod-quantity",children:(0,c.jsxs)("p",{children:["Cantidad: ",e.quantity]})}),(0,c.jsx)("div",{className:"prod-price",children:(0,c.jsxs)("p",{children:["Precio: $",e.subproduct.sell_price.toFixed(2)]})})]})]},e.subproduct._id)})),(0,c.jsx)("div",{className:"order-total",children:(0,c.jsxs)("p",{children:["Total: $",null===(s=p.cart)||void 0===s?void 0:s.total_price.toFixed(2)]})})]})]}),(0,c.jsxs)("div",{className:"order-info",children:[(0,c.jsx)("div",{className:"subtitle",children:(0,c.jsx)("h2",{children:"Direccion"})}),(0,c.jsxs)("div",{className:"address-order",children:[(0,c.jsx)("div",{className:"address-name",children:(0,c.jsxs)("p",{children:[null===(t=p.address)||void 0===t?void 0:t.street," ",null===(i=p.address)||void 0===i?void 0:i.number]})}),(0,c.jsxs)("div",{className:"address-details",children:[(0,c.jsxs)("div",{className:"col1",children:[(0,c.jsxs)("p",{children:["Piso: ",null!==(l=p.address)&&void 0!==l&&l.floor?p.address.floor:"-"]}),(0,c.jsxs)("p",{children:["Dpto: ",null!==(o=p.address)&&void 0!==o&&o.flat?p.address.flat:"-"]})]}),(0,c.jsxs)("div",{className:"col2",children:[(0,c.jsxs)("p",{children:["Ciudad: ",null===(d=p.address)||void 0===d?void 0:d.city]}),(0,c.jsxs)("p",{children:["Provincia: ",null===(u=p.address)||void 0===u?void 0:u.province]})]})]}),(0,c.jsx)("div",{className:"address-extra",children:(0,c.jsx)("p",{children:null===(h=p.address)||void 0===h?void 0:h.extra})})]})]}),(0,c.jsxs)("div",{className:"order-info",children:[(0,c.jsx)("div",{className:"subtitle",children:(0,c.jsx)("h2",{children:"Entrega"})}),(0,c.jsx)("div",{className:"offer-order",children:(0,c.jsxs)("div",{className:"order-details",children:[(0,c.jsxs)("p",{children:["Fecha: ",(null===(m=p.offer)||void 0===m?void 0:m.weekday.charAt(0).toUpperCase())+(null===(x=p.offer)||void 0===x?void 0:x.weekday.slice(1))," ",new Date(null===(v=p.offer)||void 0===v?void 0:v.date).toLocaleDateString()]}),(0,c.jsxs)("p",{children:["Horario: ",(null===(j=p.offer)||void 0===j?void 0:j.hours.replace("-","hs a "))+"hs"]})]})})]})]})]})})}function je(e){var n=e.children,s=(0,r.useState)(!1),i=(0,g.Z)(s,2),l=i[0],o=i[1],d=(0,r.useState)(!1),u=(0,g.Z)(d,2),h=u[0],m=u[1],x=(0,r.useState)(!1),v=(0,g.Z)(x,2),j=v[0],f=v[1],p=(0,r.useState)(!0),Z=(0,g.Z)(p,2),N=Z[0],C=Z[1],k=(0,b.v9)((function(e){return e.clientReducer.user_auth})),w=(0,b.v9)((function(e){return e.clientReducer.token})),I=(0,b.I0)(),E=(0,t.s0)(),A=(0,r.useCallback)((0,_.Z)((0,S.Z)().mark((function e(){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I((0,y.FH)()).then((function(e){f(e.payload),C(!1)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[I]);(0,r.useEffect)((function(){w&&k?A():(C(!1),o(!0))}),[A,w,k]);var T=function(){w||j||E("/")};return(0,c.jsx)(c.Fragment,{children:N?(0,c.jsx)("div",{className:"loading",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"lg",role:"status","aria-hidden":"true"})}):(0,c.jsx)(c.Fragment,{children:!w||w&&!j?l?(0,c.jsx)(D,{show:l,onHideLogin:function(){return o(!l)},onHideRegister:function(){return m(!h)},onModalClose:T}):(0,c.jsx)(W,{show:h,onHideLogin:function(){return o(!1)},onHideRegister:function(){return m(!h)},onModalClose:T}):n})})}var fe=s(2254),pe=s(9355);function Ze(e){var n=e.show,s=e.onHideReset,t=(0,b.I0)(),i=(0,r.useState)(!1),l=(0,g.Z)(i,2),o=l[0],d=l[1],u=(0,r.useState)(!1),h=(0,g.Z)(u,2),m=h[0],x=h[1],v=(0,r.useState)(""),j=(0,g.Z)(v,2),f=j[0],p=j[1],Z=(0,r.useCallback)((function(){d(!0),t((0,y.bk)(f)).then((function(){d(!1),x(!0),setTimeout((function(){s()}),[2500])}))}),[t,f,s]);return(0,c.jsxs)(z.Z,{show:n,onHide:s,centered:!0,children:[(0,c.jsx)(z.Z.Header,{closeButton:!0,children:(0,c.jsx)(z.Z.Title,{id:"contained-modal-title-vcenter",children:"Resetar Contrase\xf1a"})}),(0,c.jsxs)(z.Z.Body,{children:[(0,c.jsxs)("div",{className:"email-container-input",children:[(0,c.jsx)("p",{children:"Ingrese su email"}),(0,c.jsx)("input",{type:"text",value:f,onChange:function(e){p(e.target.value)}}),m&&(0,c.jsx)("span",{children:"El email fue enviado! Revisa tu correo spam"})]}),(0,c.jsx)("div",{className:"email-reset-button",children:o?(0,c.jsx)(H.Z,{className:"modal-body_reset",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}):(0,c.jsx)(H.Z,{className:"modal-body_reset",onClick:Z,children:"Enviar"})})]})]})}function ge(){var e=(0,b.I0)(),n=(0,r.useState)(null),s=(0,g.Z)(n,2),t=s[0],i=s[1],a=(0,r.useState)(!1),l=(0,g.Z)(a,2),o=l[0],u=l[1],h=(0,r.useMemo)((function(){return localStorage.getItem("user")}),[]);return(0,r.useEffect)((function(){e((0,y.uy)(h)).then((function(e){e.payload&&i(e.payload)}))}),[e,h]),(0,c.jsxs)(c.Fragment,{children:[t?(0,c.jsxs)(d.Z,{className:"personal-card",children:[(0,c.jsxs)(d.Z.Body,{children:[(0,c.jsx)(d.Z.Title,{children:"Informacion personal"}),(0,c.jsxs)(d.Z.Text,{children:[(0,c.jsxs)("span",{children:["E-mail: ",null===t||void 0===t?void 0:t.email]}),(0,c.jsxs)("span",{children:["Nombre y apellido: ",null===t||void 0===t?void 0:t.full_name]}),(0,c.jsxs)("span",{children:["Telefono: ",null!==t&&void 0!==t&&t.phone?null===t||void 0===t?void 0:t.phone:"-"]})]})]}),(0,c.jsx)(d.Z.Footer,{children:(0,c.jsx)(H.Z,{variant:"link",onClick:function(){u(!0)},children:"Cambiar contrase\xf1a"})})]}):(0,c.jsx)(d.Z,{className:"personal-card",children:(0,c.jsxs)(d.Z.Body,{children:[(0,c.jsx)(d.Z.Title,{children:"Informacion personal"}),(0,c.jsxs)(pe.Z,{as:d.Z.Text,animation:"glow",children:[(0,c.jsx)(pe.Z,{xs:6}),(0,c.jsx)(pe.Z,{xs:6}),(0,c.jsx)(pe.Z,{xs:6})]})]})}),(0,c.jsx)(Ze,{show:o,onHideReset:function(){return u(!o)}})]})}var Ne=s(5987),be=s(619),ye=s(9510),Ce=s(817),ke=["_id"];function Se(){var e=(0,b.I0)(),n=(0,t.s0)(),s=(0,r.useState)(null),i=(0,g.Z)(s,2),l=i[0],o=i[1],u=(0,r.useState)(!1),h=(0,g.Z)(u,2),m=h[0],x=h[1],v=(0,r.useMemo)((function(){return localStorage.getItem("user")}),[]),j=function(e){var n={variant:"primary",text:"CONFIRMADO"};switch(e){case me.Wp.CONFIRMED:return n.variant="primary",n.text="CONFIRMADO",n;case me.Wp.DELIVERED:return n.variant="success",n.text="ENTREGADO",n;case me.Wp.PROGRESS:return n.variant="warning",n.text="EN PROCESO",n;case me.Wp.CANCELLED:return n.variant="danger",n.text="CANCELADO",n;default:return n}},f=(0,r.useCallback)(function(){var s=(0,_.Z)((0,S.Z)().mark((function s(t){var r;return(0,S.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return x(!0),t._id,r=(0,Ne.Z)(t,ke),e((0,y.vj)(r)),s.next=5,e((0,y.iM)(r)).then((function(e){n("/checkout/re-order")}));case 5:x(!1);case 6:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}(),[e,n]);return(0,r.useEffect)((function(){e((0,y.lv)(v)).then((function(e){e.payload&&o(e.payload)}))}),[e,v]),(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{className:"personal-card",children:(0,c.jsxs)(d.Z.Body,{children:[(0,c.jsx)(d.Z.Title,{children:"Pedidos"}),(0,c.jsx)(d.Z,{children:(0,c.jsxs)(d.Z.Title,{className:"d-flex w-100 card-title m-0 p-1 justify-content-around h5",children:[(0,c.jsx)("p",{children:"Fecha"}),(0,c.jsx)("p",{children:"Total"}),(0,c.jsx)("p",{children:"Estado"})]})}),l?(0,c.jsx)(ye.Z,{className:"accordion-orders",children:null===l||void 0===l?void 0:l.map((function(e){var n;return null===e||void 0===e||null===(n=e.orders)||void 0===n?void 0:n.map((function(e){var n,s,t,r,i,l,o;return(0,c.jsxs)(ye.Z.Item,{eventKey:null===e||void 0===e?void 0:e._id,children:[(0,c.jsx)(ye.Z.Header,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,c.jsxs)("div",{className:"accordion-header d-flex w-100 card-title m-0 p-1 justify-content-around fs-6 text align-items-center",children:[(0,c.jsx)("div",{className:"info-accordion",children:(0,c.jsx)("h5",{children:null===(n=new Date(e.createdAt))||void 0===n?void 0:n.toLocaleDateString()})}),(0,c.jsx)("div",{className:"info-accordion",children:(0,c.jsxs)("h5",{children:["$",null===e||void 0===e||null===(s=e.cart)||void 0===s||null===(t=s.total_price)||void 0===t?void 0:t.toFixed(2)]})}),(0,c.jsx)("div",{className:"info-accordion",children:(0,c.jsx)("h5",{children:(0,c.jsx)(be.Z,{bg:null===(r=j(null===e||void 0===e?void 0:e.status))||void 0===r?void 0:r.variant,className:"ms-2",children:null===(i=j(null===e||void 0===e?void 0:e.status))||void 0===i?void 0:i.text})})})]})}),(0,c.jsxs)(ye.Z.Body,{children:[(0,c.jsxs)(Ce.Z,{striped:!0,bordered:!0,hover:!0,className:(null===e||void 0===e?void 0:e.status)===me.Wp.DELIVERED?"":"m-0",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Producto"}),(0,c.jsx)("th",{children:"Cantidad"}),(0,c.jsx)("th",{children:"Total"})]})}),(0,c.jsx)("tbody",{children:null===e||void 0===e||null===(l=e.cart)||void 0===l||null===(o=l.subproducts)||void 0===o?void 0:o.map((function(e){var n,s,t,r,i,a;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:"".concat(null===e||void 0===e||null===(s=e.subproduct)||void 0===s||null===(t=s.product)||void 0===t?void 0:t.name," ").concat(null===e||void 0===e||null===(r=e.subproduct)||void 0===r?void 0:r.size,"kg")}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.quantity}),(0,c.jsxs)("td",{children:["$",null===e||void 0===e||null===(i=e.subproduct)||void 0===i||null===(a=i.sell_price)||void 0===a?void 0:a.toFixed(2)]})]},null===e||void 0===e||null===(n=e.subproduct)||void 0===n?void 0:n._id)}))})]}),(null===e||void 0===e?void 0:e.status)===me.Wp.DELIVERED&&(0,c.jsx)("div",{className:"d-flex align-items-center justify-content-end mt-3",children:m?(0,c.jsx)(H.Z,{variant:"success",children:(0,c.jsx)(a.Z,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}):(0,c.jsx)(H.Z,{variant:"success",onClick:function(){return f(null===e||void 0===e?void 0:e.cart)},children:"Re-compra"})})]})]},null===e||void 0===e?void 0:e._id)}))}))},l._id):(0,c.jsxs)(pe.Z,{as:ye.Z,animation:"glow",className:"accordion-orders",children:[(0,c.jsx)(pe.Z,{as:ye.Z.Header,animation:"glow",children:(0,c.jsx)(pe.Z,{xs:11})}),(0,c.jsx)(pe.Z,{as:ye.Z.Header,animation:"glow",children:(0,c.jsx)(pe.Z,{xs:11})})]})]})})})}function _e(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(d.Z,{className:"personal-card",children:(0,c.jsxs)(d.Z.Body,{children:[(0,c.jsx)(d.Z.Title,{children:"Configuracion"}),(0,c.jsxs)(pe.Z,{as:d.Z.Body,animation:"glow",className:"accordion-orders",children:[(0,c.jsx)(pe.Z,{as:d.Z.Text,animation:"glow",children:(0,c.jsx)(pe.Z,{xs:11})}),(0,c.jsx)(pe.Z,{as:d.Z.Text,animation:"glow",children:(0,c.jsx)(pe.Z,{xs:11})})]})]})})})}function we(){var e=(0,r.useState)("info"),n=(0,g.Z)(e,2),s=n[0],t=n[1],i=function(e){t(e.target.id)};return(0,c.jsxs)("div",{className:"content-page",children:[(0,c.jsx)("div",{className:"title",children:(0,c.jsx)("h1",{children:"Cuenta"})}),(0,c.jsxs)("div",{className:"account-container",children:[(0,c.jsx)("div",{className:"side-nav",children:(0,c.jsxs)(fe.Z,{defaultActiveKey:"index",children:[(0,c.jsx)(fe.Z.Item,{id:"info",action:!0,onClick:i,children:"Informacion personal"}),(0,c.jsx)(fe.Z.Item,{id:"orders",action:!0,onClick:i,children:"Mis pedidos"})]})}),(0,c.jsxs)("div",{className:"item-selected",children:["info"===s&&(0,c.jsx)(ge,{}),"orders"===s&&(0,c.jsx)(Se,{}),"setting"===s&&(0,c.jsx)(_e,{})]})]})]})}function Ie(e){var n=e.inactivityTime,s=(0,b.I0)(),t=(0,r.useRef)(null),i=(0,r.useCallback)((function(){clearTimeout(t.current),t.current=setTimeout((function(){s((0,y.Nv)())}),60*n*1e3)}),[n,s]);return(0,r.useEffect)((function(){return i(),document.addEventListener("mousemove",i),document.addEventListener("keypress",i),document.addEventListener("DOMContentLoaded",i),function(){document.removeEventListener("mousemove",i),document.removeEventListener("keypress",i),document.removeEventListener("DOMContentLoaded",i),clearTimeout(t.current)}}),[i]),null}function Ee(){return(0,c.jsxs)("div",{className:"App",children:[(0,c.jsx)(Ie,{inactivityTime:"60"}),(0,c.jsx)(re,{}),(0,c.jsxs)(t.Z5,{children:[(0,c.jsx)(t.AW,{exact:!0,path:"/",element:(0,c.jsx)(o,{children:(0,c.jsx)(p,{})})}),(0,c.jsx)(t.AW,{exact:!0,path:"/products",element:(0,c.jsx)(o,{children:(0,c.jsx)(k,{})})}),(0,c.jsx)(t.AW,{exact:!0,path:"/checkout/:order_type",element:(0,c.jsx)(je,{children:(0,c.jsx)(o,{children:(0,c.jsx)(xe,{})})})}),(0,c.jsx)(t.AW,{exact:!0,path:"/orders",element:(0,c.jsx)(je,{children:(0,c.jsx)(o,{children:(0,c.jsx)(ve,{})})})}),(0,c.jsx)(t.AW,{exact:!0,path:"/account",element:(0,c.jsx)(je,{children:(0,c.jsx)(o,{children:(0,c.jsx)(we,{})})})})]})]})}}}]);
//# sourceMappingURL=984.5d40d687.chunk.js.map